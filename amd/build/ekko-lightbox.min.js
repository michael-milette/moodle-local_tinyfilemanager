function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("local_tinyfilemanager/ekko-lightbox",["jquery"],function(){var b=function(a){a(document).on("click","[data-toggle=\"lightbox\"]",function(b){b.preventDefault();var c=function(){if("undefined"!=typeof isHighlightingEnabled&&isHighlightingEnabled){setTimeout(function(){a(".ekko-lightbox-container pre code").each(function(a,b){hljs.highlightBlock(b)})},555)}};a(this).ekkoLightbox({alwaysShowClose:!0,showArrows:!0,onShown:function onShown(){c()},onNavigate:function onNavigate(){c()}})})}(jQuery),c=function(){function a(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}return function(b,c,d){if(c)a(b.prototype,c);if(d)a(b,d);return b}}();function a(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}(function(b){var d=b.fn.ekkoLightbox,e={title:"",footer:"",maxWidth:9999,maxHeight:9999,showArrows:!0,wrapping:!0,type:null,alwaysShowClose:!1,loadingMessage:"<div class=\"ekko-lightbox-loader\"><div><div></div><div></div></div></div>",leftArrow:"<span>&#10094;</span>",rightArrow:"<span>&#10095;</span>",strings:{close:"Close",fail:"Failed to load image:",type:"Could not detect remote target type. Force the type using data-type"},doc:document,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}},f=function(){c(d,null,[{key:"Default",get:function(){return e}}]);function d(c,f){var g=this;a(this,d);this._config=b.extend({},e,f);this._$modalArrows=null;this._galleryIndex=0;this._galleryName=null;this._padding=null;this._border=null;this._titleIsShown=!1;this._footerIsShown=!1;this._wantedWidth=0;this._wantedHeight=0;this._touchstartX=0;this._touchendX=0;this._modalId="ekkoLightbox-"+Math.floor(1e3*Math.random()+1);this._$element=c instanceof jQuery?c:b(c);this._isBootstrap3=3==b.fn.modal.Constructor.VERSION[0];var h="<h4 class=\"modal-title\">"+(this._config.title||"&nbsp;")+"</h4>",i="<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\""+this._config.strings.close+"\"><span aria-hidden=\"true\">&times;</span></button>",j="<div class=\"modal-header"+(this._config.title||this._config.alwaysShowClose?"":" hide")+"\">"+(this._isBootstrap3?i+h:h+i)+"</div>",k="<div class=\"modal-footer"+(this._config.footer?"":" hide")+"\">"+(this._config.footer||"&nbsp;")+"</div>";b(this._config.doc.body).append("<div id=\""+this._modalId+"\" class=\"ekko-lightbox modal fade\" tabindex=\"-1\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">"+("<div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content\">"+j+"<div class=\"modal-body\"><div class=\"ekko-lightbox-container\"><div class=\"ekko-lightbox-item fade in show\"></div><div class=\"ekko-lightbox-item fade\"></div></div></div>"+k+"</div></div>")+"</div>");this._$modal=b("#"+this._modalId,this._config.doc);this._$modalDialog=this._$modal.find(".modal-dialog").first();this._$modalContent=this._$modal.find(".modal-content").first();this._$modalBody=this._$modal.find(".modal-body").first();this._$modalHeader=this._$modal.find(".modal-header").first();this._$modalFooter=this._$modal.find(".modal-footer").first();this._$lightboxContainer=this._$modalBody.find(".ekko-lightbox-container").first();this._$lightboxBodyOne=this._$lightboxContainer.find("> div:first-child").first();this._$lightboxBodyTwo=this._$lightboxContainer.find("> div:last-child").first();this._border=this._calculateBorders();this._padding=this._calculatePadding();this._galleryName=this._$element.data("gallery");if(this._galleryName){this._$galleryItems=b(document.body).find("*[data-gallery=\""+this._galleryName+"\"]");this._galleryIndex=this._$galleryItems.index(this._$element);b(document).on("keydown.ekkoLightbox",this._navigationalBinder.bind(this));if(this._config.showArrows&&1<this._$galleryItems.length){this._$lightboxContainer.append("<div class=\"ekko-lightbox-nav-overlay\"><a href=\"#\">"+this._config.leftArrow+"</a><a href=\"#\">"+this._config.rightArrow+"</a></div>");this._$modalArrows=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay").first();this._$lightboxContainer.on("click","a:first-child",function(a){a.preventDefault();return g.navigateLeft()});this._$lightboxContainer.on("click","a:last-child",function(a){a.preventDefault();return g.navigateRight()});this.updateNavigation()}}this._$modal.on("show.bs.modal",this._config.onShow.bind(this)).on("shown.bs.modal",function(){g._toggleLoading(!0);g._handle();return g._config.onShown.call(g)}).on("hide.bs.modal",this._config.onHide.bind(this)).on("hidden.bs.modal",function(){if(g._galleryName){b(document).off("keydown.ekkoLightbox");b(window).off("resize.ekkoLightbox")}g._$modal.remove();return g._config.onHidden.call(g)}).modal(this._config);b(window).on("resize.ekkoLightbox",function(){g._resize(g._wantedWidth,g._wantedHeight)});this._$lightboxContainer.on("touchstart",function(){g._touchstartX=event.changedTouches[0].screenX}).on("touchend",function(){g._touchendX=event.changedTouches[0].screenX;g._swipeGesure()})}c(d,[{key:"element",value:function(){return this._$element}},{key:"modal",value:function(){return this._$modal}},{key:"navigateTo",value:function(a){if(0>a||a>this._$galleryItems.length-1)return this;this._galleryIndex=a;this.updateNavigation();this._$element=b(this._$galleryItems.get(this._galleryIndex));this._handle()}},{key:"navigateLeft",value:function(){if(!this._$galleryItems)return;if(1===this._$galleryItems.length)return;if(0===this._galleryIndex){if(this._config.wrapping)this._galleryIndex=this._$galleryItems.length-1;else return}else this._galleryIndex--;this._config.onNavigate.call(this,"left",this._galleryIndex);return this.navigateTo(this._galleryIndex)}},{key:"navigateRight",value:function(){if(!this._$galleryItems)return;if(1===this._$galleryItems.length)return;if(this._galleryIndex===this._$galleryItems.length-1){if(this._config.wrapping)this._galleryIndex=0;else return}else this._galleryIndex++;this._config.onNavigate.call(this,"right",this._galleryIndex);return this.navigateTo(this._galleryIndex)}},{key:"updateNavigation",value:function(){if(!this._config.wrapping){var a=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay");if(0===this._galleryIndex)a.find("a:first-child").addClass("disabled");else a.find("a:first-child").removeClass("disabled");if(this._galleryIndex===this._$galleryItems.length-1)a.find("a:last-child").addClass("disabled");else a.find("a:last-child").removeClass("disabled")}}},{key:"close",value:function(){return this._$modal.modal("hide")}},{key:"_navigationalBinder",value:function(a){a=a||window.event;if(39===a.keyCode)return this.navigateRight();if(37===a.keyCode)return this.navigateLeft()}},{key:"_detectRemoteType",value:function(a,b){b=b||!1;if(!b&&this._isImage(a))b="image";if(!b&&this._getYoutubeId(a))b="youtube";if(!b&&this._getVimeoId(a))b="vimeo";if(!b&&this._getInstagramId(a))b="instagram";if("audio"==b||"video"==b||!b&&this._isMedia(a))b="media";if(!b||0>["image","youtube","vimeo","instagram","media","url"].indexOf(b))b="url";return b}},{key:"_getRemoteContentType",value:function(a){var c=b.ajax({type:"HEAD",url:a,async:!1}),d=c.getResponseHeader("Content-Type");return d}},{key:"_isImage",value:function(a){return a&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}},{key:"_isMedia",value:function(a){return a&&a.match(/(\.(mp3|mp4|ogg|webm|wav)((\?|#).*)?$)/i)}},{key:"_containerToUse",value:function(){var a=this,b=this._$lightboxBodyTwo,c=this._$lightboxBodyOne;if(this._$lightboxBodyTwo.hasClass("in")){b=this._$lightboxBodyOne;c=this._$lightboxBodyTwo}c.removeClass("in show");setTimeout(function(){if(!a._$lightboxBodyTwo.hasClass("in"))a._$lightboxBodyTwo.empty();if(!a._$lightboxBodyOne.hasClass("in"))a._$lightboxBodyOne.empty()},500);b.addClass("in show");return b}},{key:"_handle",value:function(){var a=this._containerToUse();this._updateTitleAndFooter();var b=this._$element.attr("data-remote")||this._$element.attr("href"),c=this._detectRemoteType(b,this._$element.attr("data-type")||!1);if(0>["image","youtube","vimeo","instagram","media","url"].indexOf(c))return this._error(this._config.strings.type);switch(c){case"image":this._preloadImage(b,a);this._preloadImageByIndex(this._galleryIndex,3);break;case"youtube":this._showYoutubeVideo(b,a);break;case"vimeo":this._showVimeoVideo(this._getVimeoId(b),a);break;case"instagram":this._showInstagramVideo(this._getInstagramId(b),a);break;case"media":this._showHtml5Media(b,a);break;default:this._loadRemoteContent(b,a);break;}return this}},{key:"_getYoutubeId",value:function(a){if(!a)return!1;var b=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return b&&11===b[2].length?b[2]:!1}},{key:"_getVimeoId",value:function(a){return a&&0<a.indexOf("vimeo")?a:!1}},{key:"_getInstagramId",value:function(a){return a&&0<a.indexOf("instagram")?a:!1}},{key:"_toggleLoading",value:function(a){a=a||!1;if(a){this._$modalDialog.css("display","none");this._$modal.removeClass("in show");b(".modal-backdrop").append(this._config.loadingMessage)}else{this._$modalDialog.css("display","block");this._$modal.addClass("in show");b(".modal-backdrop").find(".ekko-lightbox-loader").remove()}return this}},{key:"_calculateBorders",value:function(){return{top:this._totalCssByAttribute("border-top-width"),right:this._totalCssByAttribute("border-right-width"),bottom:this._totalCssByAttribute("border-bottom-width"),left:this._totalCssByAttribute("border-left-width")}}},{key:"_calculatePadding",value:function(){return{top:this._totalCssByAttribute("padding-top"),right:this._totalCssByAttribute("padding-right"),bottom:this._totalCssByAttribute("padding-bottom"),left:this._totalCssByAttribute("padding-left")}}},{key:"_totalCssByAttribute",value:function(a){return parseInt(this._$modalDialog.css(a),10)+parseInt(this._$modalContent.css(a),10)+parseInt(this._$modalBody.css(a),10)}},{key:"_updateTitleAndFooter",value:function(){var a=this._$element.data("title")||"",b=this._$element.data("footer")||"";this._titleIsShown=!1;if(a||this._config.alwaysShowClose){this._titleIsShown=!0;this._$modalHeader.css("display","").find(".modal-title").html(a||"&nbsp;")}else this._$modalHeader.css("display","none");this._footerIsShown=!1;if(b){this._footerIsShown=!0;this._$modalFooter.css("display","").html(b)}else this._$modalFooter.css("display","none");return this}},{key:"_showYoutubeVideo",value:function(a,b){var c=this._getYoutubeId(a),d=0<a.indexOf("&")?a.substr(a.indexOf("&")):"",e=this._$element.data("width")||560,f=this._$element.data("height")||e/(560/315);return this._showVideoIframe("//www.youtube.com/embed/"+c+"?badge=0&autoplay=1&html5=1"+d,e,f,b)}},{key:"_showVimeoVideo",value:function(a,b){var c=this._$element.data("width")||500,d=this._$element.data("height")||c/(560/315);return this._showVideoIframe(a+"?autoplay=1",c,d,b)}},{key:"_showInstagramVideo",value:function(a,b){var c=this._$element.data("width")||612,d=c+80;a="/"!==a.substr(-1)?a+"/":a;b.html("<iframe width=\""+c+"\" height=\""+d+"\" src=\""+a+"embed/\" frameborder=\"0\" allowfullscreen></iframe>");this._resize(c,d);this._config.onContentLoaded.call(this);if(this._$modalArrows)this._$modalArrows.css("display","none");this._toggleLoading(!1);return this}},{key:"_showVideoIframe",value:function(a,b,c,d){c=c||b;d.html("<div class=\"embed-responsive embed-responsive-16by9\"><iframe width=\""+b+"\" height=\""+c+"\" src=\""+a+"\" frameborder=\"0\" allowfullscreen class=\"embed-responsive-item\"></iframe></div>");this._resize(b,c);this._config.onContentLoaded.call(this);if(this._$modalArrows)this._$modalArrows.css("display","none");this._toggleLoading(!1);return this}},{key:"_showHtml5Media",value:function(a,b){var c=this._getRemoteContentType(a);if(!c){return this._error(this._config.strings.type)}var d="";if(0<c.indexOf("audio")){d="audio"}else{d="video"}var e=this._$element.data("width")||560,f=this._$element.data("height")||e/(560/315);b.html("<div class=\"embed-responsive embed-responsive-16by9\"><"+d+" width=\""+e+"\" height=\""+f+"\" preload=\"auto\" autoplay controls class=\"embed-responsive-item\"><source src=\""+a+"\" type=\""+c+"\">"+this._config.strings.type+"</"+d+"></div>");this._resize(e,f);this._config.onContentLoaded.call(this);if(this._$modalArrows)this._$modalArrows.css("display","none");this._toggleLoading(!1);return this}},{key:"_loadRemoteContent",value:function(a,c){var d=this,e=this._$element.data("width")||560,f=this._$element.data("height")||560,g=this._$element.data("disableExternalCheck")||!1;this._toggleLoading(!1);if(!g&&!this._isExternal(a)){c.load(a,b.proxy(function(){return d._$element.trigger("loaded.bs.modal")}))}else{c.html("<iframe src=\""+a+"\" frameborder=\"0\" allowfullscreen></iframe>");this._config.onContentLoaded.call(this)}if(this._$modalArrows)this._$modalArrows.css("display","none");this._resize(e,f);return this}},{key:"_isExternal",value:function(a){var b=a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);if("string"==typeof b[1]&&0<b[1].length&&b[1].toLowerCase()!==location.protocol)return!0;if("string"==typeof b[2]&&0<b[2].length&&b[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host)return!0;return!1}},{key:"_error",value:function(a){console.error(a);this._containerToUse().html(a);this._resize(300,300);return this}},{key:"_preloadImageByIndex",value:function(a,c){if(!this._$galleryItems)return;var d=b(this._$galleryItems.get(a),!1);if("undefined"==typeof d)return;var e=d.attr("data-remote")||d.attr("href");if("image"===d.attr("data-type")||this._isImage(e))this._preloadImage(e,!1);if(0<c)return this._preloadImageByIndex(a+1,c-1)}},{key:"_preloadImage",value:function(a,c){var d=this;c=c||!1;var e=new Image;if(c){(function(){var f=setTimeout(function(){c.append(d._config.loadingMessage)},200);e.onload=function(){if(f)clearTimeout(f);f=null;var a=b("<img />");a.attr("src",e.src);a.addClass("img-fluid");a.css("width","100%");c.html(a);if(d._$modalArrows)d._$modalArrows.css("display","");d._resize(e.width,e.height);d._toggleLoading(!1);return d._config.onContentLoaded.call(d)};e.onerror=function(){d._toggleLoading(!1);return d._error(d._config.strings.fail+("  "+a))}})()}e.src=a;return e}},{key:"_swipeGesure",value:function(){if(this._touchendX<this._touchstartX){return this.navigateRight()}if(this._touchendX>this._touchstartX){return this.navigateLeft()}}},{key:"_resize",value:function(a,c){c=c||a;this._wantedWidth=a;this._wantedHeight=c;var d=a/c,e=this._padding.left+this._padding.right+this._border.left+this._border.right,f=575<this._config.doc.body.clientWidth?20:0,g=575<this._config.doc.body.clientWidth?0:20,h=Math.min(a+e,this._config.doc.body.clientWidth-f,this._config.maxWidth);if(a+e>h){c=(h-e-g)/d;a=h}else a=a+e;var i=0,j=0;if(this._footerIsShown)j=this._$modalFooter.outerHeight(!0)||55;if(this._titleIsShown)i=this._$modalHeader.outerHeight(!0)||67;var k=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top,l=parseFloat(this._$modalDialog.css("margin-top"))+parseFloat(this._$modalDialog.css("margin-bottom")),m=Math.min(c,b(window).height()-k-l-i-j,this._config.maxHeight-k-i-j);if(c>m){a=Math.ceil(m*d)+e}this._$lightboxContainer.css("height",m);this._$modalDialog.css("flex",1).css("maxWidth",a);var n=this._$modal.data("bs.modal");if(n){try{n._handleUpdate()}catch(a){n.handleUpdate()}}return this}}],[{key:"_jQueryInterface",value:function(a){var c=this;a=a||{};return this.each(function(){var e=b(c),f=b.extend({},d.Default,e.data(),"object"===_typeof(a)&&a);new d(c,f)})}}]);return d}();b.fn.ekkoLightbox=f._jQueryInterface;b.fn.ekkoLightbox.Constructor=f;b.fn.ekkoLightbox.noConflict=function(){b.fn.ekkoLightbox=d;return f._jQueryInterface};return f})(jQuery)});
//# sourceMappingURL=ekko-lightbox.min.js.map
